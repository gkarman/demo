# Demo Go Project

Проект на Go с настройкой конфигурации через cleanenv.

## Требования

- Go 1.23.5 или выше
- Make (опционально, для использования Makefile)

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd demoGoProject
```

2. Установите зависимости:
```bash
go mod download
```

## Настройка

1. Создайте файл `.env.local` в корне проекта на основе примера:
```bash
cp .env.example .env.local
```

2. Отредактируйте `.env.local` и укажите свои значения:
```env
ENV=local
DB_HOST=localhost
DB_PORT=5432
DB_NAME=demo
DB_USER=user
DB_PASS=pass
```

**Примечание:** Файл `.env.local` находится в `.gitignore` и не будет закоммичен в репозиторий.

## Запуск

### Через Makefile (рекомендуется):
```bash
make run
```

### Напрямую через Go:
```bash
go run ./cmd/demo
```

## Конфигурация

Проект использует библиотеку [cleanenv](https://github.com/ilyakaznacheev/cleanenv) для загрузки конфигурации.

Конфигурация загружается из двух источников (в порядке приоритета):
1. **Переменные окружения** (наивысший приоритет)
2. **Файл `configs/config.yaml`** (значения по умолчанию)

### Доступные переменные окружения:

- `ENV` - окружение (по умолчанию: `local`)
- `DB_HOST` - хост базы данных
- `DB_PORT` - порт базы данных
- `DB_NAME` - имя базы данных
- `DB_USER` - пользователь базы данных
- `DB_PASS` - пароль базы данных

## Структура проекта

```
demoGoProject/
├── cmd/
│   └── demo/
│       └── main.go          # Точка входа приложения
├── configs/
│   └── config.yaml          # Конфигурационный файл
├── internal/
│   └── config/
│       ├── config.go        # Структуры конфигурации
│       └── loader.go        # Загрузчик конфигурации
├── .env.local               # Локальные переменные окружения (не в git)
├── .env.example             # Пример переменных окружения
├── Makefile                 # Команды для разработки
├── go.mod                   # Зависимости Go
└── README.md                # Этот файл
```

## Разработка

Для добавления новых переменных конфигурации:

1. Добавьте поле в структуру `Config` или соответствующую вложенную структуру в `internal/config/config.go`
2. Добавьте теги `env` для переменных окружения
3. При необходимости добавьте значения по умолчанию через `env-default` или в `configs/config.yaml`
4. Обновите `.env.example` с примером новой переменной
